########################################################################
#
# $Id: Makefile.in,v 1.2 2002/01/18 15:54:07 mavrik Exp $
#
########################################################################
#
# Copyright 2000-2002 Klayton Monroe, Exodus Communications, Inc.
# All Rights Reserved.
#
########################################################################
#
# Purpose: Makefile for the project's root directory.
#
########################################################################

#.SILENT:

prefix			= @prefix@
exec_prefix		= @exec_prefix@

INSTALL			= @INSTALL@
RM			= rm -f

SUBS			=\
			cgi\
			doc\
			etc\
			src

all:
	@cwd=`pwd`; for i in ${SUBS}; do echo '<<<' $$i '>>>'; cd $$cwd/$$i; make $@; done

install:
	umask 22; if [ ! -d ${prefix} ]; then mkdir ${prefix}; fi
	@cwd=`pwd`; for i in ${SUBS}; do echo '<<<' $$i '>>>'; cd $$cwd/$$i; make $@; done

clean:
	@cwd=`pwd`; for i in ${SUBS}; do echo '<<<' $$i '>>>'; cd $$cwd/$$i; make $@; done

clean-all: clean-auto
	@cwd=`pwd`; for i in ${SUBS}; do echo '<<<' $$i '>>>'; cd $$cwd/$$i; make $@; done

clean-auto:
	${RM} config.cache config.status config.log Makefile

dist-clean: clean-auto
	${RM} configure
	@cwd=`pwd`; for i in ${SUBS}; do echo '<<<' $$i '>>>'; cd $$cwd/$$i; make $@; done

auto: configure.in Makefile.in src/Makefile.in
	autoconf
	autoheader --localdir=src configure.in > src/config.h.in

ctar:
	@cwd=`pwd`; dir=`basename $$cwd`; tar -C ../ -zcf "../$$dir-current.tgz" $$dir

dtar:
	@cwd=`pwd`; dir=`basename $$cwd`; ts=`date "+%Y-%m-%d"`; tar -C ../ -zcf "../$$dir-$$ts.tgz" $$dir
